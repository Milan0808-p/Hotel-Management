


<% layout("/layouts/boilerplate") %>

  <div class="filters-container">
    <div class="filters">
      <button class="scroll-btn left"><i class="fa-solid fa-chevron-left"></i></button>
      <a href="/listings?category=Trending" class="filter">
        <div><i class="fa-solid fa-fire"></i></div>
        <p>Trending</p>
      </a>
      <a href="/listings?category=Pools" class="filter">
        <div><i class="fa-solid fa-person-swimming"></i></div>
        <p>Pools</p>
      </a>
      <a href="/listings?category=Camping" class="filter">
        <div><i class="fa-solid fa-campground"></i></div>
        <p>Camping</p>
      </a>
      <a href="/listings?category=Farms" class="filter">
        <div><i class="fa-solid fa-cow"></i></div>
        <p>Farms</p>
      </a>
      <a href="/listings?category=Beach" class="filter">
        <div><i class="fa-solid fa-umbrella-beach"></i></div>
        <p>Beach</p>
      </a>
      <a href="/listings?category=Mountains" class="filter">
        <div><i class="fa-solid fa-mountain-sun"></i></div>
        <p>Mountains</p>
      </a>
      <a href="/listings?category=Castles" class="filter">
        <div><i class="fa-solid fa-chess-rook"></i></div>
        <p>Castles</p>
      </a>
      <a href="/listings?category=Rooms" class="filter">
        <div><i class="fa-solid fa-bed"></i></div>
        <p>Rooms</p>
      </a>
      <a href="/listings?category=Arctic" class="filter">
        <div><i class="fa-regular fa-snowflake"></i></div>
        <p>Arctic</p>
      </a>
      <a href="/listings?category=Boats" class="filter">
        <div><i class="fa-solid fa-sailboat"></i></div>
        <p>Boats</p>
      </a>
      <button class="scroll-btn right"><i class="fa-solid fa-chevron-right"></i></button>
    </div>
    <div class="text-toggle">
      <div class="form-check-reverse form-switch ">
        <input class="form-check-input" type="checkbox" role="switch" id="switchCheckDefault">
        <label class="form-check-label" for="switchCheckDefault">Display Total Taxes</label>
      </div>
    </div>
  </div>


  <div class="card-container">
    <% if (allListings.length === 0) { %>
      <p class="text-center mt-4">No listings found for "<%= search %>".</p>
    <% } else { %>
      
      <% for (let listing of allListings) { %>
        <a href="/listings/<%= listing._id %>">
        <div class="card mb-3" style="width: 18rem;">
          <div class="card-img-container">
            <img src="<%= listing.image.url %>" class="card-img-top" alt="Image">
            <!-- Like button -->
            <button class="like-btn">
              <i class="fa-solid fa-heart"></i>
            </button>
          </div>
          <div class="card-img-overlay"></div>
          <div class="card-body">
            <p class="card-title">
              <%= listing.title %>
            </p>
            <p class="card-text">
              <i class="fa-solid fa-location-dot"></i> <%= listing.location %>
            </p>
            <p class="card-text">
              <b>&#8377; <%= listing.price ? listing.price.toLocaleString("en-IN") : "N/A" %></b> /night
              <i class="card-text-text"> &nbsp; &nbsp; +18% GST</i>
            </p>
            
          </div>
        </div>
        </a>
      <% } %>
    <% } %>
  </div>



  <!-- //this is for like btn -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Select all like buttons
      const likeButtons = document.querySelectorAll(".like-btn");

      // Add click event listener to each like button
      likeButtons.forEach((button) => {
        button.addEventListener("click", (event) => {
          event.preventDefault(); // Prevent navigation if inside a link
          button.classList.toggle("liked"); // Toggle the 'liked' class
        });
      });
    });
  </script>